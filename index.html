<!DOCTYPE html>
<html lang="ja" class="font-medium">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FGSSmap | 思い出の地図を見る</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap"
    rel="stylesheet"
  />
  <style>
    :root {
      --base-font-size: 16px;
      --primary: #5c6bc0;
      --accent: #ff7043;
      --bg: #f9f9f9;
      --card-bg: #fff;
      --text: #333;
      --muted: #777;
    }
    html {
      font-size: var(--base-font-size);
      scroll-behavior: smooth;
    }
    html.font-small { --base-font-size: 14px; }
    html.font-medium { --base-font-size: 16px; }
    html.font-large { --base-font-size: 18px; }

    body.dark-mode {
      --bg: #2b2b2b;
      --card-bg: #3c3c3c;
      --text: #f0f0f0;
      --muted: #aaa;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Montserrat', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }
    a { color: inherit; text-decoration: none; }
    h1,h2,h3 { font-weight: 600; }
    .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }
    header {
      background: var(--primary);
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .nav {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 60px;
      position: relative;
    }
    .font-size-selector {
      position: absolute;
      left: 20px;
      display: flex;
      gap: 6px;
    }
    .font-size-button {
      background: none;
      border: 2px solid #fff;
      border-radius: 4px;
      color: #fff;
      padding: 4px 10px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .font-size-button:hover { background: rgba(255,255,255,0.2); }
    .font-size-button.active {
      background: #fff;
      color: var(--primary);
    }
    .logo-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo-title img { width: 40px; }
    .site-title { font-size: 1.4rem; }
    #modeToggle {
      position: absolute;
      right: 20px;
      background: none;
      border: none;
      color: #fff;
      font-size: 1.2rem;
      cursor: pointer;
    }
    .hero {
      background:
        linear-gradient(rgba(92,107,192,0.8),rgba(92,107,192,0.8)),
        url('hero-bg.jpg') center/cover no-repeat;
      color: #fff;
      text-align: center;
      padding: 80px 20px;
    }
    .hero h1 { font-size: 2.5rem; margin-bottom: 16px; }
    .hero p  { font-size: 1.1rem; }
    section { text-align: center; margin-top: 60px; }
    section h2 {
      font-size: 1.6rem;
      color: var(--primary);
      margin-bottom: 24px;
    }
    .map-container iframe {
      width: 100%;
      max-width: 1000px;
      height: 500px;
      border: none;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .search-bar { margin-bottom: 24px; }
    .search-bar input {
      width: 100%;
      max-width: 400px;
      padding: 10px 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 0.95rem;
    }
    .memory-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
      justify-content: center;
      gap: 24px;
      margin: 0 auto;
    }
    .memory-card {
      background: var(--card-bg);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: transform 0.2s, box-shadow 0.2s;
      text-align: left;
    }
    .memory-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.15);
    }
    .memory-card img {
      width: 100%;
      height: 140px;
      object-fit: cover;
    }
    .memory-card-content { padding: 16px; }
    .memory-card h3 {
      margin-bottom: 8px;
      font-size: 1.1rem;
    }
    .memory-card p {
      margin-bottom: 12px;
      color: var(--muted);
      font-size: 0.95rem;
    }
    .memory-card span {
      font-size: 0.85rem;
      color: var(--muted);
    }
    .organization p {
      margin-bottom: 12px;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    .insta-link {
      display: inline-block;
      margin-top: 16px;
      background: var(--accent);
      color: #fff;
      padding: 10px 18px;
      border-radius: 4px;
      font-weight: 600;
      transition: opacity 0.2s;
    }
    .insta-link:hover { opacity: 0.8; }
    footer {
      text-align: center;
      padding: 20px;
      background: #eee;
      color: #555;
      font-size: 0.85rem;
      margin-top: 60px;
    }
    #toTop {
      position: fixed;
      bottom: 30px;
      right: 30px;
      display: none;
      background: var(--primary);
      color: #fff;
      border: none;
      padding: 10px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1.2rem;
      opacity: 0.8;
      transition: opacity 0.3s;
      z-index: 100;
    }
    #toTop:hover { opacity: 1; }
    @media (max-width: 600px) {
      .hero h1 { font-size: 2rem; }
      .hero p  { font-size: 1rem; }
    }
  </style>
</head>
<body>

  <header>
    <div class="container nav">
      <div class="font-size-selector">
        <button class="font-size-button" data-size="font-small">小</button>
        <button class="font-size-button active" data-size="font-medium">中</button>
        <button class="font-size-button" data-size="font-large">大</button>
      </div>
      <div class="logo-title">
        <img src="FGSSmap-icon.png" alt="FGSSmapロゴ" />
        <span class="site-title">FGSSmap</span>
      </div>
      <button id="modeToggle" aria-label="ダークモード切り替え">🌙</button>
    </div>
  </header>

  <div class="hero">
    <div class="container">
      <h1>みんなの思い出を地図に刻もう</h1>
      <p>大学生活のワクワクを、FGSSmapでいつでも振り返ろう。</p>
    </div>
  </div>

  <section id="map">
    <div class="container">
      <h2>思い出マップ</h2>
      <div class="map-container">
        <iframe
          src="https://www.google.com/maps/d/u/0/embed?mid=1nTgYFWkXf1UQHwGZCwdXuRv-aopgUkY&amp;hl=ja&amp;ll=34.12382662506017,131.43323404999998&amp;z=13"
          loading="lazy"
          title="思い出マップ"
        ></iframe>
      </div>
    </div>
  </section>

  <section id="memories">
    <div class="container">
      <h2>📍 思い出の場所一覧</h2>
      <div class="search-bar">
        <input type="text" id="searchInput" placeholder="場所名で検索…" />
      </div>
      <div class="memory-cards" id="cardsContainer">
        <!-- 静的カードはここに配置 -->
      </div>
    </div>
  </section>

  <section id="about">
    <div class="container organization">
      <h2>🎓 運営団体について</h2>
      <p>
        このプロジェクトは、山口大学国際総合科学部公認サークル
        <strong>Palet's</strong> によって運営されています。思い出を形にし、
        みんなで共有することで、つながりを深めます。
      </p>
      <a
        href="https://www.instagram.com/palets_fgss/"
        target="_blank"
        class="insta-link"
      >
        Instagramで活動を見る
      </a>
    </div>
  </section>

  <footer>
    <div class="container">
      <p>&copy; 2025 Palet's. All rights reserved.</p>
    </div>
  </footer>

  <button id="toTop" aria-label="トップに戻る">↑</button>

  <script>
    // フォントサイズ切替
    document.querySelectorAll('.font-size-button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.documentElement.classList.remove('font-small','font-medium','font-large');
        document.documentElement.classList.add(btn.dataset.size);
        document.querySelectorAll('.font-size-button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    // ダークモード切替
    document.getElementById('modeToggle').addEventListener('click', e => {
      document.body.classList.toggle('dark-mode');
      e.currentTarget.textContent = document.body.classList.contains('dark-mode') ? '☀️' : '🌙';
    });

    // Back to Top
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', () => {
      toTop.style.display = window.pageYOffset > 300 ? 'block' : 'none';
    });
    toTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // メモリー検索フィルター
    document.getElementById('searchInput').addEventListener('input', e => {
      const kw = e.target.value.toLowerCase();
      document.querySelectorAll('.memory-card').forEach(card => {
        const title = card.querySelector('h3').textContent.toLowerCase();
        card.style.display = title.includes(kw) ? '' : 'none';
      });
    });

    // KMLから思い出カードを生成
    fetch('https://www.google.com/maps/d/kml?hl=ja&mid=1nTgYFWkXf1UQHwGZCwdXuRv-aopgUkY&nl=1&forcekml=1&cid=mp&cv=G1AlQdVXWkg.ja.')
      .then(res => res.text())
      .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
      .then(kml => {
        const placemarks = kml.querySelectorAll('Placemark');
        const container = document.getElementById('cardsContainer');

        placemarks.forEach(pm => {
          const name = pm.querySelector('name')?.textContent || '名称不明';
          const desc = pm.querySelector('description')?.textContent || '説明なし';
          const card = document.createElement('div');
          card.className = 'memory-card';
          card.innerHTML = `
            <div class="memory-card-content">
              <h3>${name}</h3>
              <p>${desc}</p>
              <span>📍 My Mapsより</span>
            </div>
          `;
          container.appendChild(card);
        });
      })
      .catch(err => console.error('KML読み込みエラー:', err));
  </script>
</body>
</html>
