<!doctype html>
<html lang="ja" class="font-medium">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FGSSmap | æ€ã„å‡ºã®åœ°å›³ã‚’è¦‹ã‚‹</title>
  <meta name="google-site-verification" content="mcTa1rUBccaIuG2aw-ZKEvUvN-SuBy3gYi_vE9cPpps" />
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --base:18px;
      --primary:#5c6bc0;
      --accent:#ff7043;
      --bg:#f9f9f9;
      --card:#ffffff;
      --text:#333;
      --muted:#777;
      --shadow: 0 6px 20px rgba(20,20,40,0.08);

      /* footer specific */
      --footer-bg:#22293a;
      --footer-text:#f4f6fb;
      --footer-accent: #5c6bc0;
    }

    html{font-size:var(--base);scroll-behavior:smooth}
    html.font-small{font-size:15px}html.font-medium{font-size:18px}html.font-large{font-size:20px}
    body{font-family:'Montserrat',sans-serif;background:var(--bg);color:var(--text);line-height:1.65;margin:0;-webkit-font-smoothing:antialiased}
    *{box-sizing:border-box}a{color:inherit;text-decoration:none}

    .container{max-width:1000px;margin:0 auto;padding:0 20px}

/* Header */
    header{background:var(--primary);color:#fff;position:sticky;top:0;z-index:1000;box-shadow: 0 4px 12px rgba(0,0,0,0.08)}
    .nav{display:flex;align-items:center;justify-content:space-between;height:72px;gap:12px;padding:0 12px}
    .left-area,.center-area,.right-area{display:flex;align-items:center;gap:10px}

/* å·¦ä¸Šãƒ­ã‚´ã¨ã‚µã‚¤ãƒˆå */
    .logo-title-left{display:flex;align-items:center;gap:12px}
    .logo-title-left img{width:44px;height:44px;object-fit:contain;border-radius:6px}
    .site-title{
      font-family: 'Fredoka', 'Montserrat', sans-serif;
      font-weight:700;
      font-size:1.15rem;
      color:#fff;
      letter-spacing:0.6px;
      display:inline-block;
      transform: translateY(-1px);
      text-shadow: 0 2px 6px rgba(0,0,0,0.12);
    }

/* ãƒ•ã‚©ãƒ³ãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */
    .font-controls{display:flex;align-items:center;gap:8px}
    #fontToggle{display:none;background:none;border:2px solid rgba(255,255,255,0.12);color:#fff;border-radius:8px;padding:6px 10px;font-weight:700;cursor:pointer}
    .font-size-selector{display:flex;gap:6px;align-items:center}
    .font-size-button{background:transparent;border:2px solid #fff;border-radius:6px;color:#fff;padding:6px 10px;font-size:.95rem;cursor:pointer}
    .font-size-button.active{background:#fff;color:var(--primary)}

/* Hero */
    .hero{color:#fff;text-align:center;padding:84px 20px;background:linear-gradient(rgba(92,107,192,.85),rgba(92,107,192,.85))}
    .hero .container{position:relative;z-index:2}
    .hero h1{font-size:2.5rem;margin:0 0 12px;font-weight:700}
    .hero p{margin:0 auto;max-width:780px;color:rgba(255,255,255,0.95);font-size:1.05rem}

/* Sections */
    section{margin-top:40px;text-align:center}
    section h2{font-size:1.45rem;color:var(--primary);margin-bottom:18px}

/* Map */
    .map-container{margin:0 auto;max-width:1000px;position:relative}
    .map-container iframe{width:100%;height:460px;border-radius:8px;border:none;box-shadow:var(--shadow)}
    #mapDesc{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}

/* Search */
    .search-bar{margin-bottom:20px}
    .search-bar input{width:100%;max-width:460px;padding:14px 16px;border:1px solid #ccc;border-radius:10px;font-size:1rem;background:#fff}

/* Cards grid */
    .photo-cards,.memory-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:24px;margin-bottom:40px;justify-items:center;align-items:start}

/* Card styles */
    .photo-card,.memory-card{
      background:var(--card);
      border-radius:12px;
      overflow:hidden;
      box-shadow:0 8px 22px rgba(0,0,0,0.06);
      transition:transform .18s,box-shadow .18s;
      text-align:left;
      width:100%;
      max-width:300px;
      position:relative;
      border:1px solid rgba(0,0,0,0.04);
    }
    .photo-card:hover,.memory-card:hover{transform:translateY(-8px);box-shadow:0 18px 40px rgba(0,0,0,0.08)}

/* image wrapper to preserve ratio */
    .photo-card .img-wrap{width:100%;display:block;background:transparent}
    .photo-card img{width:100%;height:auto;display:block;object-fit:cover}

/* badge */
    .badge{position:absolute;right:12px;top:12px;background:var(--accent);color:#fff;padding:7px 10px;border-radius:8px;font-weight:700;font-size:.88rem}

    .memory-card-content,.photo-card .memory-card-content{padding:16px}
    .photo-card h3,.memory-card h3{font-size:1.15rem;margin:0 0 8px}
    .photo-card p,.memory-card p{color:var(--muted);font-size:1rem;margin:0 0 10px}

    .links-row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .external-link{display:inline-flex;align-items:center;gap:8px;background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;font-weight:700;text-decoration:none}
    .external-link.secondary{background:#4a90e2}

/* no-results center */
    .no-results {grid-column: 1 / -1;max-width: 680px;background: transparent;color: var(--muted);text-align: center;padding: 10px 12px;justify-self: center;margin: 0 auto;font-weight:600;border-radius:8px}

/* Footer: make copyright area stand out */
    footer{background:transparent}
    footer .container{padding:18px 20px;text-align:center}

/* prominent footer bar */
    .footer-bar{
      background:var(--footer-bg);
      color:var(--footer-text);
      border-top:4px solid rgba(255,255,255,0.04);
      box-shadow: 0 -6px 20px rgba(20,20,40,0.06);
      padding:18px 0;
      margin-top:28px; /* add visible white gap above footer bar */
    }
    .footer-bar p{
      margin:0;
      color:var(--footer-text);
      font-size:0.98rem;
      opacity:0.95;
    }

/* focus states */
    .font-size-button:focus, #fontToggle:focus, .external-link:focus, .photo-card:focus, .memory-card:focus {outline:3px solid rgba(92,107,192,0.18);outline-offset:4px}

/* responsive tweaks */
    @media(max-width:760px){
      .nav{height:64px;padding:0 10px}
      .logo-title-left img{width:40px;height:40px}
      .site-title{font-size:1.05rem}
      #fontToggle{display:inline-flex}
      .font-size-selector{display:none}
      .photo-cards,.memory-cards{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}
      .photo-card,.memory-card{max-width:260px}
      .hero{padding:56px 16px}
      .hero h1{font-size:2rem}
    }
    @media(max-width:420px){
      .hero h1{font-size:1.6rem}
      .photo-card,.memory-card{max-width:100%}
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav" role="navigation" aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
      <div class="left-area" style="align-items:center;">
        <div class="logo-title-left" aria-hidden="false">
          <a href="/" style="display:flex;align-items:center;gap:12px;color:inherit;text-decoration:none;">
            <img src="FGSSmap-icon.png.png" alt="FGSSmapãƒ­ã‚´">
            <span class="site-title">FGSSmap</span>
          </a>
        </div>
      </div>

      <div class="center-area" style="flex:1;justify-content:center"></div>

      <div class="right-area" style="align-items:center;">
        <div class="font-controls" aria-hidden="false">
          <button id="fontToggle" aria-expanded="false" aria-controls="fontSelector" aria-label="ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºåˆ‡æ›¿">A</button>
          <div class="font-size-selector" id="fontSelector" role="toolbar" aria-label="ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º">
            <button class="font-size-button" data-size="small" aria-pressed="false">å°</button>
            <button class="font-size-button active" data-size="medium" aria-pressed="true">ä¸­</button>
            <button class="font-size-button" data-size="large" aria-pressed="false">å¤§</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="hero">
      <div class="container">
        <h1>ã¿ã‚“ãªã®æ€ã„å‡ºã‚’åœ°å›³ã«åˆ»ã‚‚ã†</h1>
        <p>å¤§å­¦ç”Ÿæ´»ã®ãƒ¯ã‚¯ãƒ¯ã‚¯ã‚’ã€FGSSmapã§ã„ã¤ã§ã‚‚æŒ¯ã‚Šè¿”ã‚ã†ã€‚å†™çœŸã‚„å ´æ‰€ã‚’ã¿ã‚“ãªã§å…±æœ‰ã—ã¦ã€ã¤ãªãŒã‚Šã‚’æ·±ã‚ã‚ˆã†ã€‚</p>
      </div>
    </div>

    <section id="map">
      <div class="container">
        <h2>ğŸ—ºï¸ æ€ã„å‡ºãƒãƒƒãƒ—</h2>
        <div class="map-container" aria-live="polite" style="position:relative;">
          <iframe src="https://www.google.com/maps/d/u/0/embed?mid=1nTgYFWkXf1UQHwGZCwdXuRv-aopgUkY&hl=ja&ll=34.12382662506017,131.43323404999998&z=13" loading="lazy" title="æ€ã„å‡ºãƒãƒƒãƒ—" aria-describedby="mapDesc"></iframe>
          <div id="mapDesc">å¤§å­¦å‘¨è¾ºã§å…±æœ‰ã•ã‚ŒãŸæ€ã„å‡ºã®ä½ç½®æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹åŸ‹ã‚è¾¼ã¿ãƒãƒƒãƒ—ã§ã™</div>
        </div>
      </div>
    </section>

    <section id="memories">
      <div class="container">
        <h2>ğŸ“ æ€ã„å‡ºã®å ´æ‰€ä¸€è¦§</h2>
        <div class="search-bar">
          <input id="searchInput" type="search" placeholder="å ´æ‰€åã§æ¤œç´¢â€¦" aria-label="å ´æ‰€åã§æ¤œç´¢" aria-controls="cardsContainer photoCardsContainer">
        </div>

        <div class="photo-cards" id="photoCardsContainer" aria-live="polite" role="list"></div>
        <div class="memory-cards" id="cardsContainer" aria-live="polite" role="list"></div>
      </div>
    </section>

    <section id="about">
      <div class="container organization">
        <h2>ğŸ“ é‹å–¶å›£ä½“ã«ã¤ã„ã¦</h2>
        <p>ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€å±±å£å¤§å­¦å›½éš›ç·åˆç§‘å­¦éƒ¨å…¬èªã‚µãƒ¼ã‚¯ãƒ« <strong>Palet's</strong> ã«ã‚ˆã£ã¦é‹å–¶ã•ã‚Œã¦ã„ã¾ã™ã€‚æ€ã„å‡ºã‚’å½¢ã«ã—ã€ã¿ã‚“ãªã§å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€ã¤ãªãŒã‚Šã‚’æ·±ã‚ã¾ã™ã€‚</p>

        <div class="links-row" role="navigation" aria-label="å¤–éƒ¨ãƒªãƒ³ã‚¯" style="margin-top:12px">
          <a class="external-link" href="https://www.instagram.com/palets_fgss/" target="_blank" rel="noopener noreferrer" aria-label="Palet's Instagram" style="background:var(--accent);color:#fff;padding:8px 12px;border-radius:8px;text-decoration:none;font-weight:600">ğŸ“¸ Instagram</a>
          <a class="external-link secondary" href="https://www.yamaguchi-u.ac.jp/gss/index.html" target="_blank" rel="noopener noreferrer" aria-label="å±±å£å¤§å­¦å›½éš›ç·åˆç§‘å­¦éƒ¨ å…¬å¼ã‚µã‚¤ãƒˆ" style="background:#4a90e2;color:#fff;padding:8px 12px;border-radius:8px;text-decoration:none;font-weight:600">ğŸ“ å±±å£å¤§å­¦ å›½éš›ç·åˆç§‘å­¦éƒ¨</a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-bar" role="contentinfo" aria-label="è‘—ä½œæ¨©è¡¨ç¤º">
      <div class="container">
        <p>&copy; 2025 Palet's. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <button id="toTop" aria-label="ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹" style="position:fixed;right:30px;bottom:30px;display:none;background:var(--primary);color:#fff;border:none;padding:10px 12px;border-radius:8px;cursor:pointer;font-size:1.1rem;z-index:100">â†‘</button>

  <script>
    const $ = s => document.querySelector(s), $$ = s => Array.from(document.querySelectorAll(s));

    /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºåˆ‡æ›¿ï¼ˆä¿å­˜ï¼‰ */
    (function(){
      const btns = $$('.font-size-button');
      const toggle = $('#fontToggle');
      const selector = $('#fontSelector');

      const apply = size => {
        document.documentElement.classList.remove('font-small','font-medium','font-large');
        document.documentElement.classList.add(size==='small'?'font-small':size==='large'?'font-large':'font-medium');
        btns.forEach(b=>{ const on = b.dataset.size===size; b.classList.toggle('active',on); b.setAttribute('aria-pressed', on); });
        try{ localStorage.setItem('fgss_font_size', size); }catch(e){}
      };

      btns.forEach(b=>{
        b.addEventListener('click', ()=> apply(b.dataset.size));
        b.addEventListener('keydown', e=>{
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); b.click(); }
        });
      });

      const setSelectorVisible = visible => {
        selector.style.display = visible ? 'flex' : 'none';
        if (toggle) toggle.setAttribute('aria-expanded', String(visible));
      };

      if (toggle) {
        toggle.addEventListener('click', ()=> setSelectorVisible(getComputedStyle(selector).display === 'none'));
        toggle.addEventListener('keydown', e=>{
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle.click(); }
          if (e.key === 'ArrowDown') { e.preventDefault(); btns[0].focus(); setSelectorVisible(true); }
        });
      }

      const saved = (()=>{try{return localStorage.getItem('fgss_font_size')}catch(e){return null}})();
      apply(saved || 'medium');

      let rto;
      window.addEventListener('resize', ()=>{ clearTimeout(rto); rto = setTimeout(()=>{ if (window.innerWidth > 760) selector.style.display = ''; }, 150); });
    })();

    /* Back to top */
    (function(){
      const toTop = $('#toTop');
      const ensureClass = () => {
        if (window.pageYOffset > 300) toTop.style.display = 'block';
        else toTop.style.display = 'none';
      };
      window.addEventListener('scroll', () => ensureClass());
      toTop.addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));
      ensureClass();
    })();

    /* å†™çœŸã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ï¼ˆä¾‹ï¼‰ - ç”»åƒåã¯ assets/å±±å£å¤§å­¦.jpg */
    const photoCardsData = [
      { img:'å±±å£å¤§å­¦.jpg', title:'å±±å£å¤§å­¦', desc:'å±±å£å¤§å­¦ã¯å±±å£çœŒã«ã‚ã‚‹å›½ç«‹å¤§ã€‚å‰ç”°ãƒ»å¸¸ç›¤ãƒ»å°ä¸²ã®ï¼“ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã§æ–‡ç³»ãƒ»ç†ç³»ãƒ»åŒ»å­¦ãƒ»å›½éš›ç·åˆç§‘å­¦ã¾ã§å¹…åºƒãå­¦ã¹ã€ç´„ï¼‘ä¸‡äººã®å­¦ç”ŸãŒåœ°åŸŸé€£æºã‚„SDGsã«ã‚‚æŒ‘æˆ¦ä¸­ï¼', badge: 'å¤§å­¦' }
    ];

    /* å†™çœŸã‚«ãƒ¼ãƒ‰æç”» */
    (function(){
      const container = $('#photoCardsContainer');
      photoCardsData.forEach(item=>{
        const d = document.createElement('article'); d.className='photo-card';
        d.setAttribute('role','listitem');
        d.innerHTML = `
          <div class="img-wrap">
            <img src="${item.img}" alt="${item.title}">
          </div>
          <div class="badge">${item.badge || 'å†™çœŸ'}</div>
          <div class="memory-card-content">
            <h3>${item.title}</h3>
            <p>${item.desc}</p>
          </div>`;
        container.appendChild(d);
      });
    })();

    /* KML -> ã‚«ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆCORSã«æ³¨æ„ï¼‰ */
    (function(){
      const kmlUrl = 'https://www.google.com/maps/d/kml?hl=ja&mid=1nTgYFWkXf1UQHwGZCwdXuRv-aopgUkY&nl=1&forcekml=1';
      fetch(kmlUrl).then(r=>{
        if (!r.ok) throw new Error('HTTP ' + r.status);
        return r.text();
      }).then(txt=>{
        const doc = new DOMParser().parseFromString(txt,'text/xml');
        const placemarks = doc.querySelectorAll('Placemark');
        const container = $('#cardsContainer');
        if(!placemarks.length) return;
        placemarks.forEach(pm=>{
          const name = (pm.querySelector('name')?.textContent || 'åç§°ä¸æ˜');
          const desc = (pm.querySelector('description')?.textContent || 'èª¬æ˜ãªã—');
          const card = document.createElement('article'); card.className='memory-card'; card.setAttribute('role','listitem');
          card.innerHTML = `<div class="memory-card-content"><h3>${name}</h3><p>${desc}</p></div>`;
          container.appendChild(card);
        });
      }).catch(err=>{
        console.warn('KML èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ï¼ˆCORS ã®å¯èƒ½æ€§ã‚ã‚Šï¼‰:', err);
      });
    })();

    /* æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆè©²å½“ãªã—ã®è¡¨ç¤ºã¯æ¤œç´¢å®Ÿè¡Œæ™‚ã®ã¿ï¼‰ */
    (function(){
      const input = $('#searchInput');
      const cardsSelector = '.memory-card, .photo-card';
      const container = $('#cardsContainer');

      function clearNoResults() {
        const prev = document.querySelector('.no-results');
        if (prev) prev.remove();
      }

      function showNoResults() {
        clearNoResults();
        const msg = document.createElement('div');
        msg.className = 'no-results';
        msg.id = 'noResultsMessage';
        msg.textContent = 'ãƒãƒƒãƒ—ã®å ´æ‰€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚';
        const parent = container.parentElement;
        if (parent) parent.insertBefore(msg, container.nextSibling);
      }

      function filterCards(term) {
        const kw = term.trim().toLowerCase();
        let visibleCount = 0;
        $$(cardsSelector).forEach(card=>{
          const t = (card.querySelector('h3')?.textContent || '').toLowerCase();
          const matches = kw === '' || t.includes(kw);
          card.style.display = matches ? '' : 'none';
          if (matches) visibleCount++;
        });
        return visibleCount;
      }

      if (input) {
        input.addEventListener('input', e=>{
          const term = e.target.value;
          const visible = filterCards(term);
          clearNoResults();
          if (term.trim() !== '' && visible === 0) {
            showNoResults();
          }
        });
      }
    })();
  </script>
</body>
</html>
