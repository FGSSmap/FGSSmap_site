<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FGSSmap プレースマーク募集</title>
    <meta name="description" content="山口大学国際総合科学部10周年記念 - あなたの思い出の場所をFGSSmapに追加しませんか？">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/forms.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="header-title">
                    <i class="fas fa-map-marker-alt"></i>
                    FGSSmap プレースマーク募集
                </h1>
                <p class="header-subtitle">あなたの思い出の場所を地図に追加しませんか？</p>
                <div class="header-note">
                    <i class="fas fa-info-circle"></i>
                    回答内容はWebサイトに掲載される可能性があります
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Indicator -->
    <div class="progress-container">
        <div class="container">
            <div class="progress-steps">
                <div class="progress-step active" data-step="0">
                    <div class="step-number">1</div>
                    <div class="step-label">同意確認</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="1">
                    <div class="step-number">2</div>
                    <div class="step-label">基本情報</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="2">
                    <div class="step-number">3</div>
                    <div class="step-label">地図範囲</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="3">
                    <div class="step-number">4</div>
                    <div class="step-label">詳細エリア</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="4">
                    <div class="step-number">5</div>
                    <div class="step-label">思い出の場所</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="5">
                    <div class="step-number">6</div>
                    <div class="step-label">確認・送信</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Step 0: 個人情報同意確認 -->
            <div class="form-step active" id="step-0">
                <div class="step-content">
                    <h2 class="step-title">個人情報の取り扱いについて</h2>
                    <p class="step-description">まずはじめに、個人情報の取り扱いについてご確認ください</p>
                    
                    <div class="privacy-notice">
                        <div class="notice-header">
                            <i class="fas fa-shield-alt"></i>
                            <h3>プライバシーポリシー</h3>
                        </div>
                        <div class="notice-content">
                            <p>本フォームで収集した情報は、以下の目的でのみ使用し、適切に管理いたします。</p>
                            <ul class="notice-list">
                                <li><strong>FGSSmap（山口大学国際総合科学部の地図サービス）への掲載</strong></li>
                                <li><strong>10周年記念プロジェクトの運営</strong></li>
                                <li><strong>学部の教育・研究活動の向上</strong></li>
                            </ul>
                            <div class="notice-important">
                                <p><strong>重要：</strong> 投稿内容は管理者による確認後、Webサイトに掲載される可能性があります。</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="agreement-section">
                        <div class="form-checkbox">
                            <input type="checkbox" id="privacy-agreement" name="privacy-agreement" required>
                            <label for="privacy-agreement" class="agreement-label">
                                <span class="agreement-text">
                                    上記の個人情報の取り扱いについて同意します
                                </span>
                            </label>
                        </div>
                        <div class="agreement-note">
                            <i class="fas fa-info-circle"></i>
                            同意いただけない場合は、フォームをご利用いただけません。
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 1: 基本情報入力 -->
            <div class="form-step" id="step-1">
                <div class="step-content">
                    <h2 class="step-title">基本情報を入力してください</h2>
                    <p class="step-description">あなたについて教えてください（ニックネームでもOKです）</p>
                    
                    <form class="basic-info-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="user-name" class="form-label">
                                    <i class="fas fa-user"></i>
                                    お名前（ニックネーム可）
                                </label>
                                <input type="text" id="user-name" name="user-name" class="form-input"
                                       placeholder="例：山田太郎、やまちゃん">
                                <small class="form-help">
                                    個人情報保護のため、ニックネームでの投稿を推奨しています
                                </small>
                            </div>

                            <div class="form-group">
                                <label for="admission-year" class="form-label required">
                                    <i class="fas fa-calendar-alt"></i>
                                    入学年度
                                </label>
                                <select id="admission-year" name="admission-year" class="form-select" required>
                                    <option value="">入学年度を選択してください</option>
                                    <option value="2024">2024年度</option>
                                    <option value="2023">2023年度</option>
                                    <option value="2022">2022年度</option>
                                    <option value="2021">2021年度</option>
                                    <option value="2020">2020年度</option>
                                    <option value="2019">2019年度</option>
                                    <option value="2018">2018年度</option>
                                    <option value="2017">2017年度</option>
                                    <option value="2016">2016年度</option>
                                    <option value="2015">2015年度以前</option>
                                </select>
                            </div>

                            <div class="form-group full-width">
                                <label for="department" class="form-label required">
                                    <i class="fas fa-graduation-cap"></i>
                                    所属学部・学科
                                </label>
                                <input type="text" id="department" name="department" class="form-input" required
                                       placeholder="例：国際総合科学部国際総合科学科">
                                <small class="form-help">
                                    正式名称での入力をお願いします
                                </small>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Step 2: 地図範囲選択 -->
            <div class="form-step" id="step-2">
                <div class="step-content">
                    <h2 class="step-title">どちらの地図にプレースマークを追加しますか？</h2>
                    <p class="step-description">思い出の場所が含まれる地図を選択してください</p>
                    
                    <div class="map-options">
                        <div class="map-option" data-map="campus">
                            <div class="map-card">
                                <div class="map-icon">
                                    <i class="fas fa-university"></i>
                                </div>
                                <h3 class="map-title">キャンパス周辺</h3>
                                <p class="map-description">山口大学周辺の施設・場所</p>
                                <div class="map-examples">
                                    例：やまぐち元気食堂、瑠璃光寺、山口サビエル記念聖堂
                                </div>
                            </div>
                        </div>
                        
                        <div class="map-option" data-map="japan">
                            <div class="map-card">
                                <div class="map-icon">
                                    <i class="fas fa-torii-gate"></i>
                                </div>
                                <h3 class="map-title">日本全国</h3>
                                <p class="map-description">日本国内の思い出の場所</p>
                                <div class="map-examples">
                                    例：東京タワー、清水寺、札幌時計台
                                </div>
                            </div>
                        </div>
                        
                        <div class="map-option" data-map="world">
                            <div class="map-card">
                                <div class="map-icon">
                                    <i class="fas fa-globe-americas"></i>
                                </div>
                                <h3 class="map-title">全世界</h3>
                                <p class="map-description">海外の思い出深い場所</p>
                                <div class="map-examples">
                                    例：エッフェル塔、自由の女神、万里の長城
                                </div>
                                <div class="world-bonus">
                                    <i class="fas fa-comment-dots"></i>
                                    役立つフレーズも投稿できます！
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3: 詳細エリア選択 -->
            <div class="form-step" id="step-3">
                <!-- Japan Prefecture Selection -->
                <div class="area-selection" id="japan-area" style="display: none;">
                    <h2 class="step-title">都道府県を選択してください</h2>
                    <p class="step-description">思い出の場所がある都道府県を選択してください</p>
                    
                    <div class="prefecture-grid">
                        <!-- 47都道府県のボタンがJavaScriptで動的生成されます -->
                    </div>
                </div>

                <!-- World Region Selection -->
                <div class="area-selection" id="world-area" style="display: none;">
                    <h2 class="step-title">地域を選択してください</h2>
                    <p class="step-description">思い出の場所がある地域を選択してください</p>
                    
                    <div class="region-options">
                        <div class="region-option" data-region="asia">
                            <div class="region-card">
                                <div class="region-icon">🌏</div>
                                <h3>アジア</h3>
                                <p>韓国、中国、台湾、東南アジア、インドなど</p>
                            </div>
                        </div>
                        
                        <div class="region-option" data-region="europe">
                            <div class="region-card">
                                <div class="region-icon">🏰</div>
                                <h3>ヨーロッパ</h3>
                                <p>フランス、イタリア、ドイツ、イギリスなど</p>
                            </div>
                        </div>
                        
                        <div class="region-option" data-region="africa">
                            <div class="region-card">
                                <div class="region-icon">🦁</div>
                                <h3>アフリカ</h3>
                                <p>エジプト、南アフリカ、ケニア、モロッコなど</p>
                            </div>
                        </div>
                        
                        <div class="region-option" data-region="oceania">
                            <div class="region-card">
                                <div class="region-icon">🦘</div>
                                <h3>オセアニア</h3>
                                <p>オーストラリア、ニュージーランド、フィジーなど</p>
                            </div>
                        </div>
                        
                        <div class="region-option" data-region="north-america">
                            <div class="region-card">
                                <div class="region-icon">🗽</div>
                                <h3>北米</h3>
                                <p>アメリカ、カナダ、メキシコなど</p>
                            </div>
                        </div>
                        
                        <div class="region-option" data-region="south-america">
                            <div class="region-card">
                                <div class="region-icon">🏔️</div>
                                <h3>南米</h3>
                                <p>ブラジル、アルゼンチン、ペルー、チリなど</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: 思い出の場所情報入力 -->
            <div class="form-step" id="step-4">
                <div class="step-content">
                    <h2 class="step-title">思い出の場所について教えてください</h2>
                    <p class="step-description">あなたの大切な思い出の場所について詳しく入力してください</p>
                    
                    <form class="memory-form" id="memory-form">
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label for="place-name" class="form-label required">
                                    <i class="fas fa-map-pin"></i>
                                    思い出の場所の名前
                                </label>
                                <input type="text" id="place-name" name="place-name" class="form-input" required 
                                       placeholder="例：山口大学、清水寺、エッフェル塔">
                                <small class="form-help">
                                    ⚠️ 「○○さんの家」など個人情報を含まないようにお願いします
                                </small>
                            </div>

                            <div class="form-group full-width">
                                <label for="memory-content" class="form-label required">
                                    <i class="fas fa-heart"></i>
                                    思い出の内容
                                </label>
                                <textarea id="memory-content" name="memory-content" class="form-textarea" required 
                                          placeholder="例：友達と一緒にカフェでたわいもない会話をしていた。大学生活で一番楽しかった場所です。"></textarea>
                            </div>

                            <div class="form-group full-width">
                                <label for="location-info" class="form-label required">
                                    <i class="fas fa-map-marker-alt"></i>
                                    住所または座標情報
                                </label>
                                <div class="location-input-container">
                                    <input type="text" id="location-info" name="location-info" class="form-input" required 
                                           placeholder="例：山口県山口市吉田1677-1 または 34.1234, 131.5678">
                                    <button type="button" class="location-help-btn" id="location-help-btn">
                                        <i class="fas fa-question-circle"></i>
                                        座標取得方法
                                    </button>
                                </div>
                                <small class="form-help">
                                    住所または座標（緯度, 経度）のどちらでもOKです
                                </small>
                            </div>

                            <div class="form-group full-width">
                                <label for="memory-photo" class="form-label">
                                    <i class="fas fa-camera"></i>
                                    思い出の写真
                                </label>
                                <div class="photo-upload-container">
                                    <div class="photo-upload-tabs">
                                        <button type="button" class="photo-tab active" data-tab="file">
                                            <i class="fas fa-upload"></i>
                                            ファイルをアップロード
                                        </button>
                                        <button type="button" class="photo-tab" data-tab="url">
                                            <i class="fas fa-link"></i>
                                            URLから追加
                                        </button>
                                    </div>
                                    
                                    <div class="photo-upload-content">
                                        <div class="photo-tab-content active" id="photo-file-tab">
                                            <div class="form-file">
                                                <input type="file" id="photo-file" name="photo-file" accept="image/*">
                                                <label for="photo-file" class="form-file-label">
                                                    <i class="fas fa-cloud-upload-alt"></i>
                                                    <div>
                                                        <div>ここをクリックして写真を選択</div>
                                                        <small>JPG, PNG, GIF形式（最大5MB）</small>
                                                    </div>
                                                </label>
                                            </div>
                                            <div class="photo-preview" id="photo-preview" style="display: none;"></div>
                                        </div>
                                        
                                        <div class="photo-tab-content" id="photo-url-tab">
                                            <input type="url" id="photo-url" name="photo-url" class="form-input" 
                                                   placeholder="https://example.com/photo.jpg">
                                            <small class="form-help">
                                                写真共有サイトなどの公開URLを入力してください
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 海外の場合のみ表示される役立つフレーズフィールド -->
                            <div class="form-group full-width" id="useful-phrase-group" style="display: none;">
                                <label for="useful-phrase" class="form-label">
                                    <i class="fas fa-comment-dots"></i>
                                    その場所・地域で役立つフレーズ
                                </label>
                                <textarea id="useful-phrase" name="useful-phrase" class="form-textarea" 
                                          placeholder="例：「Excuse me, where is the bathroom?」（すみません、トイレはどこですか？）
現地の人とのコミュニケーションで役立ったフレーズがあれば教えてください。"></textarea>
                                <small class="form-help">
                                    現地の言語でのあいさつや実用的なフレーズを教えてください
                                </small>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Step 5: 確認・送信 -->
            <div class="form-step" id="step-5">
                <div class="step-content">
                    <h2 class="step-title">入力内容を確認してください</h2>
                    <p class="step-description">内容に間違いがないか確認して送信してください</p>
                    
                    <div class="confirmation-card">
                        <!-- 基本情報 -->
                        <div class="confirmation-section">
                            <h3 class="confirmation-title">基本情報</h3>
                            <div class="confirmation-grid">
                                <div class="confirmation-item">
                                    <span class="confirmation-label">お名前</span>
                                    <span class="confirmation-value" id="confirm-name">-</span>
                                </div>
                                <div class="confirmation-item">
                                    <span class="confirmation-label">入学年度</span>
                                    <span class="confirmation-value" id="confirm-admission-year">-</span>
                                </div>
                                <div class="confirmation-item">
                                    <span class="confirmation-label">所属</span>
                                    <span class="confirmation-value" id="confirm-department">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 場所情報 -->
                        <div class="confirmation-section">
                            <h3 class="confirmation-title">場所情報</h3>
                            <div class="confirmation-grid">
                                <div class="confirmation-item">
                                    <span class="confirmation-label">地図種類</span>
                                    <span class="confirmation-value" id="confirm-map-type">-</span>
                                </div>
                                <div class="confirmation-item">
                                    <span class="confirmation-label">詳細エリア</span>
                                    <span class="confirmation-value" id="confirm-area">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 思い出の場所 -->
                        <div class="confirmation-section">
                            <h3 class="confirmation-title">思い出の場所</h3>
                            <div class="confirmation-item full-width">
                                <span class="confirmation-label">場所の名前</span>
                                <span class="confirmation-value" id="confirm-place-name">-</span>
                            </div>
                            <div class="confirmation-item full-width">
                                <span class="confirmation-label">思い出の内容</span>
                                <span class="confirmation-value long-text" id="confirm-memory-content">-</span>
                            </div>
                            <div class="confirmation-item full-width">
                                <span class="confirmation-label">住所・座標</span>
                                <span class="confirmation-value" id="confirm-location-info">-</span>
                            </div>
                            <div class="confirmation-item full-width" id="confirm-photo-section">
                                <span class="confirmation-label">写真</span>
                                <span class="confirmation-value" id="confirm-photo">未添付</span>
                            </div>
                            <div class="confirmation-item full-width" id="confirm-phrase-section" style="display: none;">
                                <span class="confirmation-label">役立つフレーズ</span>
                                <span class="confirmation-value long-text" id="confirm-useful-phrase">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 同意確認 -->
                    <div class="agreement-section">
                        <div class="form-checkbox">
                            <input type="checkbox" id="agreement-checkbox" name="agreement" required>
                            <label for="agreement-checkbox" class="agreement-label">
                                <span class="agreement-text">
                                    上記の内容がWebサイト（FGSSmap）に掲載されることに同意します
                                </span>
                            </label>
                        </div>
                        <div class="agreement-note">
                            <i class="fas fa-info-circle"></i>
                            投稿内容は管理者による確認後、FGSSmapに掲載されます。個人情報は適切に保護されます。
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="form-navigation">
                <button type="button" class="btn btn-secondary" id="prev-btn" style="display: none;">
                    <i class="fas fa-arrow-left"></i>
                    戻る
                </button>
                
                <button type="button" class="btn btn-primary" id="next-btn">
                    次へ
                    <i class="fas fa-arrow-right"></i>
                </button>
                
                <button type="button" class="btn btn-success" id="submit-btn" style="display: none;">
                    <i class="fas fa-paper-plane"></i>
                    送信する
                </button>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="footer-text">
                © 2024 山口大学国際総合科学部 - FGSSmap 10周年記念プロジェクト
            </p>
        </div>
    </footer>

    <!-- 座標取得ヘルプボタン（フローティング） -->
    <button class="floating-help-btn" id="floating-help-btn" style="display: none;">
        <i class="fas fa-map-marker-alt"></i>
        <span>座標取得方法</span>
    </button>

    <!-- 座標取得ヘルプモーダル -->
    <div class="help-modal-overlay" id="help-modal-overlay">
        <div class="help-modal">
            <div class="help-modal-header">
                <h3>座標情報の取得方法</h3>
                <button class="help-modal-close" id="help-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="help-modal-content">
                <div class="help-tabs">
                    <button class="help-tab active" data-tab="video">
                        <i class="fas fa-play"></i>
                        動画で見る
                    </button>
                    <button class="help-tab" data-tab="text">
                        <i class="fas fa-list"></i>
                        手順説明
                    </button>
                </div>
                
                <div class="help-tab-content active" id="help-video-tab">
                    <div class="video-container">
                        <iframe id="help-video" width="100%" height="315" 
                                src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                                frameborder="0" allowfullscreen>
                        </iframe>
                        <p class="video-note">
                            <i class="fas fa-info-circle"></i>
                            動画が表示されない場合は、下の手順説明タブをご覧ください
                        </p>
                    </div>
                </div>
                
                <div class="help-tab-content" id="help-text-tab">
                    <div class="help-steps">
                        <div class="help-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Google Mapsを開く</h4>
                                <p>ブラウザで <code>maps.google.com</code> にアクセス</p>
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>場所を検索</h4>
                                <p>検索ボックスに場所の名前や住所を入力して検索</p>
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>地図上で右クリック</h4>
                                <p>目的の場所を地図上で右クリック</p>
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>座標をコピー</h4>
                                <p>表示された座標（例：35.6762, 139.6503）をクリックしてコピー</p>
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <h4>フォームに貼り付け</h4>
                                <p>コピーした座標を「住所または座標情報」欄に貼り付け</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>送信中...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/form-steps.js"></script>
    <script src="js/google-forms.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
