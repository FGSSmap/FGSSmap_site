# FGSSmap プレースマーク募集サイト 🗺️

山口大学国際総合科学部10周年記念プロジェクト - あなたの思い出の場所をFGSSmapに追加しませんか？

## 🎯 プロジェクト概要

このサイトは、山口大学国際総合科学部の学生・卒業生から思い出の場所（プレースマーク）を募集するための専用募集フォームです。投稿された内容は審査後、FGSSマップに追加されます。

## ✨ 実装済み機能

### 📝 5段階フォームシステム

1. **基本情報入力**
   - お名前（ニックネーム可）
   - 入学年度（2015年度以前〜2024年度）
   - 所属学部・学科

2. **地図範囲選択**
   - キャンパス周辺
   - 日本全国
   - 全世界（海外）

3. **詳細エリア選択**
   - 日本の場合：47都道府県選択
   - 海外の場合：6地域（アジア、ヨーロッパ、アフリカ、オセアニア、北米、南米）

4. **思い出の場所情報入力**
   - 思い出の場所の名前
   - 思い出の内容
   - 住所・座標情報（Google Mapsヘルプ機能付き）
   - 写真アップロード（ファイルまたはURL）
   - 役立つフレーズ（海外選択時のみ表示）

5. **確認・送信**
   - 入力内容の確認
   - 同意確認チェックボックス
   - Google Forms連携送信

### 🛠️ 高度な機能

#### 📸 写真アップロード機能
- **ファイル選択**：デバイスから写真を直接アップロード（最大5MB、JPG/PNG/GIF対応）
- **URL入力**：写真共有サイトなどの公開URLを入力
- **プレビュー機能**：アップロードした写真の即座にプレビュー表示

#### 🗺️ 座標取得ヘルプシステム
- **フローティングヘルプボタン**：思い出の場所入力時に右側に表示
- **動画チュートリアル**：Google Mapsでの座標取得方法を動画で解説
- **手順説明**：テキストベースの詳細な手順説明
- **モーダルUI**：ESCキー対応、アクセシブルなモーダル表示

#### 🌏 条件付き機能表示
- **海外選択時**：「役立つフレーズ」入力フィールドが自動表示
- **フローティングヘルプ**：思い出の場所入力時のみ座標ヘルプボタンが表示
- **動的バリデーション**：リアルタイムでの入力内容検証

#### ✅ バリデーション機能
- **必須項目チェック**：入学年度、学部、場所名、思い出内容、位置情報、同意確認
- **ファイルサイズ制限**：画像ファイルの5MB制限
- **ファイル形式チェック**：画像ファイルのみ許可
- **リアルタイム更新**：入力に応じてナビゲーションボタンの状態が変化

## 🎨 デザイン特徴

- **レスポンシブデザイン**：スマートフォン、タブレット、PC対応
- **FGSSカラー統一**：ブランド統一性を保った配色設計
- **モダンUI**：CSS Grid、Flexbox活用のレイアウト
- **アクセシビリティ**：ARIA属性、キーボードナビゲーション対応
- **アニメーション効果**：滑らかなトランジションとホバーエフェクト

## 📂 ファイル構成

```
/
├── index.html              # メインページ（5段階フォーム）
├── README.md              # プロジェクト説明書
├── css/
│   ├── style.css          # メインスタイルシート（モーダル、ボタン、レスポンシブ）
│   └── forms.css          # フォーム専用スタイル
├── js/
│   ├── form-steps.js      # フォーム管理クラス（写真アップロード、ヘルプモーダル）
│   ├── google-forms.js    # Google Forms連携ハンドラー
│   └── main.js           # 初期化とイベント管理
└── placemark/
    └── [既存のFGSSマップファイル]
```

## 🔧 技術仕様

### フロントエンド技術
- **HTML5**：セマンティックマークアップ、アクセシビリティ対応
- **CSS3**：CSS Custom Properties、Grid Layout、Flexbox
- **Vanilla JavaScript ES6+**：Class構文、Async/Await、Module Pattern
- **Font Awesome 6**：アイコンライブラリ
- **Google Fonts**：Noto Sans JP + Inter フォント

### データ管理
- **FormData API**：ファイルアップロード処理
- **FileReader API**：画像プレビュー機能
- **Local State Management**：JavaScript Classベースの状態管理
- **Google Forms Integration**：外部フォーム連携

### 新しいデータ構造
```javascript
formData = {
  // 基本情報
  name: '',                    // 名前
  admissionYear: '',           // 入学年度
  department: '',              // 所属学部・学科
  
  // 地図・場所情報
  mapType: null,               // 地図種別（campus/japan/world）
  area: null,                  // エリア（都道府県/地域）
  placeName: '',               // 思い出の場所名
  memoryContent: '',           // 思い出の内容
  locationInfo: '',            // 住所・座標情報
  
  // 写真情報
  photoFile: null,             // アップロード写真ファイル
  photoUrl: '',               // 写真URL
  photoType: 'file',          // 写真タイプ（'file' or 'url'）
  
  // 海外の場合
  usefulPhrase: '',           // 役立つフレーズ
  
  // 同意
  agreement: false            // 同意確認
}
```

## 🚀 主要機能詳細

### 1. 多段階フォーム管理
- プログレスインジケーター付きの5段階フォーム
- 各段階での入力内容バリデーション
- 前後ナビゲーション機能

### 2. 写真アップロード（デュアル方式）
- **ファイルアップロード**：ドラッグ&ドロップ対応、プレビュー表示
- **URL入力**：外部画像URLの直接入力
- タブ切り替えで方式選択が可能

### 3. インタラクティブヘルプシステム
- **座標取得ヘルプモーダル**：Google Maps操作方法
- **動画とテキストの2way説明**：視覚的・テキスト的両方でサポート
- **コンテキスト連動表示**：必要な時にだけ表示される設計

### 4. 条件分岐UI
- 地図選択に応じた次のステップ内容変更
- 海外選択時の「役立つフレーズ」フィールド自動表示
- リアルタイム確認画面更新

### 5. Google Forms統合
- 新データ構造に対応した送信処理
- エラーハンドリングとリトライ機能
- 送信完了時の成功画面表示

## 💡 使用方法

0. **個人情報の取り扱いに同意**してください
1. **基本情報を入力**してください
2. **地図の種類**を選択してください（キャンパス/日本/世界）
3. **詳細なエリア**を選択してください
4. **思い出の場所の情報**を詳しく入力してください
   - 座標が分からない場合は「座標取得方法」ボタンで動画ヘルプを参照
   - 写真がある場合は、ファイルアップロードまたはURL入力で追加
   - 海外の場合は、その地域で役立つフレーズも入力できます
5. **入力内容を確認**して同意にチェックし、送信してください

## 🎯 今後の拡張予定

- [ ] 管理者用承認システム
- [ ] プレビューマップ連携
- [ ] 多言語対応
- [ ] オフライン機能
- [ ] PWA化

## 📝 開発メモ

- **Google FormsのエントリーID**は運用時に実際の値に変更が必要
- **動画URL**は実際のGoogle Maps操作チュートリアル動画に変更済み
- **ファイルアップロード**は現在はフロントエンド処理のみ（実際のファイル保存は別途実装が必要）

---

© 2024 山口大学国際総合科学部 - FGSSmap 10周年記念プロジェクト
